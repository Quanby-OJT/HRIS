<div class="flex">
    <app-sidebar-navigation></app-sidebar-navigation>
    <div class="flex-grow">
        <div class="min-h-screen overflow-y-auto border border-black overflow-auto">
            <main class="flex flex-col gap-6 p-6">
                <div class="mb-6 flex justify-between items-center">
                    <div>
                        <p class="max-md:text-xl text-2xl font-bold">Personnel Information Management</p>
                        <p class="max-md:text-lg">Manage HR Information</p>
                    </div>
                </div>
                <div class="flex flex-col gap-5">
                    
                    <div class="flex flex-col w-full gap-5 ">
                        <div class="flex w-full h-20 gap-5">
                            <div class="flex-1 flex flex-col w-1/4 px-4 py-3 bg-white rounded-lg shadow-md gap-1">
                                <p class="font-semibold text-md">Employees Present</p>
                                <div class="flex items-end justify-between">
                                    <p id="total-program-count" class="text-3xl public-sans-font-bold">{{attendanceTodayData[0].numPresent}}</p> 
                                </div>
                            </div>
                            <div class="flex-1 flex flex-col w-1/4 px-4 py-3 bg-white rounded-lg shadow-md gap-1">
                                <p class="font-semibold text-md ">Employees Absent</p>
                                <div class="flex items-end justify-between">
                                    <p id="total-program-count" class="text-3xl public-sans-font-bold">{{attendanceTodayData[0].numAbsent}}</p> 
                                </div>
                            </div>
                            <div class="flex-1 flex flex-col w-1/4 px-4 py-3 bg-white rounded-lg shadow-md gap-1">
                                <p class="font-semibold text-md ">Employees Tardy</p>
                                <div class="flex items-end justify-between">
                                    <p id="total-program-count" class="text-3xl public-sans-font-bold">{{attendanceTodayData[0].numTardy}}</p> 
                                </div>
                            </div>
                            <div class="flex-1 flex flex-col w-1/4 px-4 py-3 bg-white rounded-lg shadow-md gap-1">
                                <p class="font-semibold text-md ">Total Employees</p>
                                <div class="flex items-end justify-between">
                                    <p id="total-program-count" class="text-3xl public-sans-font-bold">{{employees.length}}</p> 
                                </div>
                            </div>
                        </div> 
                    </div>
                    <!-- TABLE -->
                    <div class="overflow-x-auto">
                        <div class="max-h-[29rem] overflow-y-auto custom-scrollbar">
                            <table class="w-full text-left" >
                                <thead class="bg-gray-100 z-10 sticky top-0">
                                    <tr>
                                        <th class="px-3 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
                                        <th class="px-3 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider">Schedule</th>
                                        <th class="px-3 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider">Days Present</th>
                                        <th class="px-3 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider">Days Absent</th>
                                        <th class="px-3 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider">Days Tardy</th>
                                        <th class="px-3 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider">Leave Credits</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr [attr.id]="records.name" *ngFor="let records of uniqueEmpAttendances; index as i;" (click)="toggleModal(records)" class="cursor-pointer">
                                        <td class="px-3 py-4 whitespace-nowrap text-sm text-gray-900">{{records.name}}</td>
                                        <td class="px-3 py-4 whitespace-nowrap text-sm text-gray-500">9:00 AM - 5:00 PM</td>
                                        <td class="px-3 py-4 whitespace-nowrap text-sm text-gray-500">{{records.numPresent}}</td>
                                        <td class="px-3 py-4 whitespace-nowrap text-sm text-gray-500">{{records.numAbsent}}</td>
                                        <td class="px-3 py-4 whitespace-nowrap text-sm text-gray-500">{{records.numTardy}}</td>
                                        <td class="px-3 py-4 whitespace-nowrap text-sm text-gray-500">{{records.leaveCredits}}</td>
                                    </tr>
                                    <!-- PERSONNEL FILE MODAL -->
                                    <div *ngIf="showPersonnelModal"  id="personnel-modal" (click)="closeModal()"  class="flex fixed inset-0 z-50 bg-black bg-opacity-50 overflow-y-auto h-full w-full justify-center items-center">
                                        <div class="relative px-4 w-auto max-w-4xl" (click)="$event.stopPropagation()">
                                            <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
                                                <!-- HEADER -->
                                                <div class="flex items-center justify-between p-3 border-b rounded-t dark:border-gray-600">
                                                    <p class="text-xl font-semibold text-gray-600 dark:text-white items-center" >
                                                        Personnel File
                                                    </p>
                                                    <button type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" (click)="closeModal()">
                                                        <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                                                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                                                        </svg>
                                                        <span class="sr-only">Close modal</span>
                                                    </button>
                                                </div>
                                                <div class="p-4 space-y-4">
                                                    <div class="flex gap-5 w-full">
                                                        <div class="flex flex-col w-[20%]">
                                                            <div class="border border-black w-full h-3/4 mb-5"></div>
                                                            <p>2021-2462-68800</p>
                                                        </div>
                                                        <div class="flex flex-col gap-5">
                                                            <div  class="flex w-full gap-10">
                                                                <div class="flex flex-col gap-2">
                                                                    <p class="text-gray-500 italic text-xs">First Name, Middle Name, Surname, Suffix</p>
                                                                    <p class="text-semibold tracking-wider text-3xl uppercase">{{ selectedRecord?.firstName || 'N/A' }}</p>
                                                                </div>
                                                                <div class="flex flex-col gap-2">
                                                                    <p class="text-gray-500 italic text-xs">Position</p>
                                                                    <p class="text-semibold tracking-wider text-md">RDE's personal slave</p>
                                                                </div>
                                                            </div>
                                                            
                                                            <div class="flex gap-5 w-full items-center justify-between">
                                                                <div class="flex flex-col gap-2 w-[40%]">
                                                                    <p class="text-gray-500 italic text-xs">Address</p>
                                                                    <p class="text-semibold tracking-wider text-md w-3/4">Sa puso mo Blvd. Brgy Pag-asa. 1892 Pasay City</p>
                                                                </div>
                                                                <div class="flex h-full justify-end items-end">
                                                                    <button class="flex p-3 text-white bg-blue-600 hover:bg-blue-700 rounded-lg">View Personnel's 201 File</button>

                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </tbody>
                            </table>
                            <div class="p-4 text-center text-gray-500">
                                No Time In Recorded
                            </div>
                        </div>
                    </div> 
                </div>
            </main>
        </div>
    </div>
</div>