<main class="flex flex-col px-14 pt-5 pb-20 bg-white max-md:px-5">
  <header class="flex gap-5 justify-between w-full text-black whitespace-nowrap max-md:flex-wrap max-md:max-w-full">
    <h1 class="flex gap-5 justify-between text-6xl font-bold max-md:text-4xl">
      <span class="max-md:text-4xl">Quanby</span>
      <img loading="lazy" src="https://cdn.builder.io/api/v1/image/assets/TEMP/ab4e5bd827f14f911a2d583072c36d16d70f94a881729504f6e5d71e5dc42681?apiKey=f35c25b17acb406083beeda46a28c843&" alt="" class="shrink-0 my-auto w-6 aspect-square" />
    </h1>
    <nav class="my-auto text-4xl">Home</nav>
  </header>
  
  <section class="flex gap-5 justify-between self-start mt-6 ml-9 text-5xl font-bold text-center text-black whitespace-nowrap max-md:ml-2.5 max-md:text-4xl">
    <h2 class="max-md:text-4xl">Workflow</h2>
    <img loading="lazy" src="https://cdn.builder.io/api/v1/image/assets/TEMP/5aba0972af733b54318d4cb929daf1afd60afdc61c7fbbc6ea18ef0ec7bbe940?apiKey=f35c25b17acb406083beeda46a28c843&" alt="" class="shrink-0 my-auto w-6 aspect-square" />
  </section>
  
  <div class="flex gap-5 justify-between pr-2 mt-3.5 text-xl text-neutral-800 text-opacity-70 max-md:flex-wrap max-md:max-w-full">
    <div class="flex flex-col justify-center px-7 py-7 whitespace-nowrap">
      <select [(ngModel)]="selectedStatus" (change)="filterWorkflows()" class="justify-center items-start px-7 py-7 bg-white rounded-xl border-2 border-solid border-neutral-400 border-opacity-30 max-md:px-5">
        <option value="">All Statuses</option>
        <option value="Pending">Pending</option>
        <option value="Approved">Approved</option>
        <option value="Rejected">Rejected</option>
      </select>
    </div>
    <div class="justify-center px-7 py-6 my-auto bg-white rounded-xl border-2 border-solid border-neutral-400 border-opacity-30 max-md:px-5 max-md:max-w-full">
      <input
        type="text"
        [(ngModel)]="searchTerm"
        (input)="filterWorkflows()"
        placeholder="Search workflow by name, requestee or any related keywords"
        class="w-full bg-transparent"
      />
    </div>
  </div>
  
  <section class="mt-10 ml-5 w-full rounded-xl bg-zinc-300 max-md:max-w-full">
    <table class="w-full">
      <thead>
        <tr class="text-3xl font-medium text-center text-black">
          <th class="p-2.5">Status</th>
          <th class="p-2.5">Submitted for</th>
          <th class="p-2.5">Reviewer</th>
          <th class="p-2.5">Request</th>
          <th class="p-2.5">Requested by</th>
        </tr>
      </thead>
      <tbody>
        @for (workflow of filteredWorkflows; track workflow.id) {
          <tr class="bg-white border-b-2 border-solid border-neutral-400 border-opacity-50">
            <td class="p-2.5 text-center">
              <span [ngClass]="{
                'bg-yellow-200': workflow.status === 'Pending',
                'bg-lime-300': workflow.status === 'Approved',
                'bg-rose-400': workflow.status === 'Rejected'
              }" class="px-7 py-1.5 rounded-xl text-white font-bold">
                {{ workflow.status }}
              </span>
            </td>            
            <td class="p-2.5">
              <div class="flex gap-5 items-center">
                <img [src]="'https://api.dicebear.com/7.x/initials/svg?seed=' + workflow.submitted_for" [alt]="workflow.submitted_for" class="w-[45px] h-[45px] rounded-full" />
                <div>
                  <div class="text-xl text-neutral-800">{{ workflow.submitted_for }}</div>
                  <div class="text-base text-neutral-800 text-opacity-70">{{ workflow.submitted_for_role }}</div>
                </div>
              </div>
            </td>
            <td class="p-2.5 text-xl text-neutral-800">{{ workflow.reviewer }}</td>
            <td class="p-2.5">
              <div class="text-xl text-neutral-800">{{ workflow.request }}</div>
              <a href="#" class="text-lg text-sky-700 underline">View</a>
            </td>
            <td class="p-2.5">
              <div class="text-xl text-neutral-800">{{ workflow.requested_by }}</div>
              <div class="text-base text-neutral-800 text-opacity-70">{{ workflow.requested_by_role }}</div>
            </td>
          </tr>
        }
      </tbody>
    </table>
    
    <nav class="flex justify-between items-center p-4 bg-white">
      <button (click)="previousPage()" [disabled]="currentPage === 1" class="px-4 py-2 bg-blue-500 text-white rounded-md disabled:bg-gray-300">Previous</button>
      <span>Page {{ currentPage }} of {{ totalPages }}</span>
      <button (click)="nextPage()" [disabled]="currentPage === totalPages" class="px-4 py-2 bg-blue-500 text-white rounded-md disabled:bg-gray-300">Next</button>
    </nav>
  </section>
</main>